<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="String 变量处理 速记  三个特殊符号在键盘上的位置 # $ %  $ 用来取值 # 在 $ 的左边，删除字符串的左边的内容，需要配合 * ，如：${str#*/} ## 是贪婪匹配，从左往右，# 是匹配到第一个，## 是匹配到最后一个，如： ${str##*/} % 在 $ 的右边，删除字符串的右边的内容，需要配合 * ，如：${str%/*} %% 是贪婪匹配，从右往左，% 是匹配到倒数第一个，%% 是匹配到开头第一个，如： ${str%%/*}   字符串替换  ${VALUE/OLD/NEW} 替换第一个，如： ${str/\//.} ${VALUE//OLD/NEW} 替换所有，如： ${str//\//.}   字符串截取  ${VALUE:OFFSET:LENGTH} 从左开始向右截取，如：${str:1} 、 ${str:1:2} ${VALUE:0-OFFSET:LENGTH} 从右开始向由截取，如：${str:0-1} 、 ${str:0-3:2}   变量默认值替换  ${VALUE:-WORD}：当变量未定义或者值为空时，返回值为 WORD 的内容，否则返回变量的值 ${VALUE:=WORD}：当变量未定义或者值为空时，返回 WORD 的值的同时并将 WORD 赋值给 VALUE，否则返回变量的值 ${VALUE:&#43;WORD}：当变量 已赋值 时，其值才用 WORD 替换，否则不进行任何替换 ${VALUE:?"><meta property="og:title" content="var 字符串处理" />
<meta property="og:description" content="String 变量处理 速记  三个特殊符号在键盘上的位置 # $ %  $ 用来取值 # 在 $ 的左边，删除字符串的左边的内容，需要配合 * ，如：${str#*/} ## 是贪婪匹配，从左往右，# 是匹配到第一个，## 是匹配到最后一个，如： ${str##*/} % 在 $ 的右边，删除字符串的右边的内容，需要配合 * ，如：${str%/*} %% 是贪婪匹配，从右往左，% 是匹配到倒数第一个，%% 是匹配到开头第一个，如： ${str%%/*}   字符串替换  ${VALUE/OLD/NEW} 替换第一个，如： ${str/\//.} ${VALUE//OLD/NEW} 替换所有，如： ${str//\//.}   字符串截取  ${VALUE:OFFSET:LENGTH} 从左开始向右截取，如：${str:1} 、 ${str:1:2} ${VALUE:0-OFFSET:LENGTH} 从右开始向由截取，如：${str:0-1} 、 ${str:0-3:2}   变量默认值替换  ${VALUE:-WORD}：当变量未定义或者值为空时，返回值为 WORD 的内容，否则返回变量的值 ${VALUE:=WORD}：当变量未定义或者值为空时，返回 WORD 的值的同时并将 WORD 赋值给 VALUE，否则返回变量的值 ${VALUE:&#43;WORD}：当变量 已赋值 时，其值才用 WORD 替换，否则不进行任何替换 ${VALUE:?" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://hello-world-example.github.io/Linux/docs/100_Shell/011.var_string/" />
<meta property="article:modified_time" content="2020-10-25T16:57:44+08:00" />
<title>var 字符串处理 | Linux</title>
<link rel="icon" href="/Linux/favicon.png" type="image/x-icon">


<link rel="stylesheet" href="/Linux/book.min.d436f463c9471cfab26a8b71cd2f50b6abf5225806391453da4ca111d1834fef.css" integrity="sha256-1Db0Y8lHHPqyaotxzS9Qtqv1IlgGORRT2kyhEdGDT&#43;8=">


<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/Linux"><span>Linux</span>
  </a>
</h2>












  

  
  





 
  
    




  
  <ul>
    
      
        

  <li>
    

  
  <a href="/Linux/docs/100_Shell/" class="collapsed ">Shell</a>
  


    




  
  <ul>
    
      
        <li>

  
  <a href="/Linux/docs/100_Shell/007.zsh/" class="">zsh</a>
  

</li>
      
    
      
        <li>

  
  <a href="/Linux/docs/100_Shell/010.var/" class="">var 变量与参数</a>
  

</li>
      
    
      
        <li>

  
  <a href="/Linux/docs/100_Shell/011.var_string/" class="active">var 字符串处理</a>
  

</li>
      
    
      
        <li>

  
  <a href="/Linux/docs/100_Shell/020.if/" class="">if 条件语句</a>
  

</li>
      
    
      
        <li>

  
  <a href="/Linux/docs/100_Shell/030.for/" class="">for 循环语句</a>
  

</li>
      
    
      
        <li>

  
  <a href="/Linux/docs/100_Shell/035.array/" class="">数组操作</a>
  

</li>
      
    
      
        <li>

  
  <a href="/Linux/docs/100_Shell/050.function/" class="">function 函数</a>
  

</li>
      
    
      
        <li>

  
  <a href="/Linux/docs/100_Shell/900.21/" class="">输出从定向</a>
  

</li>
      
    
      
        <li>

  
  <a href="/Linux/docs/100_Shell/901.nohup/" class="">后台运行</a>
  

</li>
      
    
  </ul>
  



  </li>


      
    
      
        

  <li>
    

  
  <a href="/Linux/docs/200_Command/" class="collapsed ">Command</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/Linux/docs/300_Configuration/" class="collapsed ">文件和配置</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/Linux/docs/900_FAQ/" class="">FAQ</a>
  


    




  
  <ul>
    
  </ul>
  



  </li>


      
    
  </ul>
  



  
















</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/Linux/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>var 字符串处理</strong>

  <label for="toc-control">
    <img src="/Linux/svg/toc.svg" class="book-icon" alt="Table of Contents" />
  </label>
</div>


  
    <input type="checkbox" class="hidden" id="toc-control" />
    <aside class="hidden clearfix">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#string-变量处理">String 变量处理</a>
      <ul>
        <li><a href="#速记">速记</a></li>
        <li><a href="#示例">示例</a></li>
      </ul>
    </li>
  </ul>
</nav>


    </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="string-变量处理">String 变量处理</h1>
<h2 id="速记">速记</h2>
<ul>
<li>三个特殊符号在键盘上的位置 <code>#</code>  <code>$</code>  <code>%</code>
<ul>
<li><code>$</code> 用来取值</li>
<li><code>#</code> 在 <code>$</code> 的左边，<strong>删除</strong>字符串的<strong>左边</strong>的内容，需要配合 <code>*</code> ，如：<code>${str#*/}</code></li>
<li><code>##</code> 是贪婪匹配，从左往右，<code>#</code> 是匹配到第一个，<code>##</code> 是匹配到最后一个，如： <code>${str##*/}</code></li>
<li><code>%</code> 在 <code>$</code> 的右边，<strong>删除</strong>字符串的<strong>右边</strong>的内容，需要配合 <code>*</code> ，如：<code>${str%/*}</code></li>
<li><code>%%</code> 是贪婪匹配，从右往左，<code>%</code> 是匹配到倒数第一个，<code>%%</code> 是匹配到开头第一个，如： <code>${str%%/*}</code></li>
</ul>
</li>
<li><strong>字符串替换</strong>
<ul>
<li><code>${VALUE/OLD/NEW}</code>  替换第一个，如： <code>${str/\//.}</code></li>
<li><code>${VALUE//OLD/NEW}</code>  替换所有，如： <code>${str//\//.}</code></li>
</ul>
</li>
<li><strong>字符串截取</strong>
<ul>
<li><code>${VALUE:OFFSET:LENGTH}</code> 从<strong>左</strong>开始<strong>向右</strong>截取，如：<code>${str:1}</code> 、 <code>${str:1:2}</code></li>
<li><code>${VALUE:0-OFFSET:LENGTH}</code> 从<strong>右</strong>开始<strong>向由</strong>截取，如：<code>${str:0-1}</code> 、 <code>${str:0-3:2}</code></li>
</ul>
</li>
<li><strong>变量默认值替换</strong>
<ul>
<li><code>${VALUE:-WORD}</code>：当变量<strong>未定义</strong>或者<strong>值为空</strong>时，返回值为 WORD 的内容，否则返回变量的值</li>
<li><code>${VALUE:=WORD}</code>：当变量<strong>未定义</strong>或者<strong>值为空</strong>时，返回 WORD 的值的同时并将 WORD 赋值给 VALUE，否则返回变量的值</li>
<li><code>${VALUE:+WORD}</code>：当变量 <strong>已赋值</strong> 时，其值才用 WORD 替换，否则不进行任何替换</li>
<li><code>${VALUE:?MESSAGE}</code>：当变量已赋值时，正常替换。否则将消息 MESSAGE 送到标准错误输出，在SHELL程序中时将终止运行</li>
</ul>
</li>
</ul>
<h2 id="示例">示例</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
str<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;123/465/789&#34;</span>

echo $str<span style="color:#e6db74">&#34; == 123/465/789&#34;</span>
echo
echo <span style="color:#e6db74">&#34;字符串长度&#34;</span>
echo <span style="color:#e6db74">${#</span>str<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34; == 11&#34;</span>
echo
echo <span style="color:#e6db74">&#34;删除左侧&#34;</span>
echo <span style="color:#e6db74">${</span>str#*/<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34; == 456/789&#34;</span>
echo <span style="color:#e6db74">${</span>str##*/<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34; == 789&#34;</span>
echo
echo <span style="color:#e6db74">&#34;删除右侧&#34;</span>
echo <span style="color:#e6db74">${</span>str%/*<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34; == 123/456&#34;</span>
echo <span style="color:#e6db74">${</span>str%%/*<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34; == 123&#34;</span>
echo
echo <span style="color:#e6db74">&#34;字符串替换&#34;</span>
echo <span style="color:#e6db74">${</span>str/<span style="color:#ae81ff">\/</span>/.<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34; == 123.456/789&#34;</span>
echo <span style="color:#e6db74">${</span>str//<span style="color:#ae81ff">\/</span>/.<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34; == 123.456.789&#34;</span>
echo
echo <span style="color:#e6db74">&#34;字符串截取&#34;</span>
echo <span style="color:#e6db74">${</span>str:1<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34; == 23/465/789&#34;</span>
echo <span style="color:#e6db74">${</span>str:1:2<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34; == 23&#34;</span>
echo <span style="color:#e6db74">${</span>str:0-1<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34; == 9&#34;</span>
echo <span style="color:#e6db74">${</span>str:0-3:2<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34; == 78&#34;</span>
echo
echo <span style="color:#e6db74">&#34;变量默认值&#34;</span>
str<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&#39;</span>
echo <span style="color:#e6db74">${</span>str<span style="color:#66d9ef">:-</span><span style="color:#e6db74">&#34;123&#34;</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&#34; == 123&#34;</span>
echo <span style="color:#e6db74">${</span>str<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34; == &#39;&#39;&#34;</span>
echo <span style="color:#e6db74">${</span>str:=<span style="color:#e6db74">&#34;345&#34;</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&#34; == 345&#34;</span>
echo <span style="color:#e6db74">${</span>str<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34; == 345&#34;</span>

echo <span style="color:#e6db74">${</span>str:?<span style="color:#e6db74">&#34;Error Message&#34;</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&#34; == 345 -- 无错误信息&#34;</span>
str<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&#39;</span>
echo <span style="color:#e6db74">${</span>str:?<span style="color:#e6db74">&#34;Error Message&#34;</span><span style="color:#e6db74">}</span><span style="color:#e6db74">&#34; -- 这里报错&#34;</span>
</code></pre></div></article>
 
      

      <footer class="book-footer">
        
  <div class="flex justify-between">



  <div>
    
    <a class="flex align-center" href="https://github.com/hello-world-example/Linux/commit/1527b910cd47223b3f5f436fd12b3d3b35731974" title='Last modified by kailbin | Oct 25, 2020' target="_blank" rel="noopener">
      <img src="/Linux/svg/calendar.svg" class="book-icon" alt="Calendar" />
      <span>Oct 25, 2020</span>
    </a>
  </div>



  <div>
    <a class="flex align-center" href="https://github.com/hello-world-example/Linux/edit/master/HuGo/content/docs/100_Shell/011.var_string.md" target="_blank" rel="noopener">
      <img src="/Linux/svg/edit.svg" class="book-icon" alt="Edit" />
      <span>Edit this page</span>
    </a>
  </div>

</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#string-变量处理">String 变量处理</a>
      <ul>
        <li><a href="#速记">速记</a></li>
        <li><a href="#示例">示例</a></li>
      </ul>
    </li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
</body>

</html>












